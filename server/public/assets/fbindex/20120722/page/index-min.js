KISSY.add("utils/app-history",function(a){function c(){var a=localStorage.getItem(b);if(!a)return[];try{var c=a.split(",")}catch(d){return[]}return c}function d(a){return localStorage.setItem(b,a.join(","))}if(!window.localStorage)return null;var b="AppHistory";return{push:function(b){var e=c();e=a.filter(e,function(a){return a!=b}),e.unshift(b),d(e)},get:function(){return c()},rm:function(b){var e=c();return e=a.filter(e,function(a){return a!=b}),d(e),!0}}}),KISSY.add("page/template/app-history-tpl",function(){return{html:'<h3>\u5386\u53f2\u8bb0\u5f55\uff1a</h3>\n{{#each his as item index}}\n<div class="his-item">\n    <a class="his-title" href="/app?root={{item}}">{{item}}	</a>\n    <a class="his-delete" title="delete" data-index="{{index}}" href="#">&times;</a>\n</div>\n{{/each}}\n'}}),KISSY.add("page/index",function(a,b,c,d,e){var f=b.all;d&&a.ready(function(){var b=d.get(),g=f("#app-history");b.length&&g.html(c(e.html).render({his:b})),f("body").delegate("click",".his-delete",function(b){b.preventDefault();var c=f(b.target).parent(".his-item"),e=a.trim(c.one(".his-title").text());d.rm(e)&&f(b.target).parent(".his-item").fadeOut(.2)})})},{requires:["node","template","utils/app-history","./template/app-history-tpl"]}); 