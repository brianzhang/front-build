KISSY.add("utils/app-history",function(a){function c(){var a=localStorage.getItem(b);if(!a)return[];try{var c=a.split(",")}catch(d){return[]}return c}function d(a){return localStorage.setItem(b,a.join(","))}if(!window.localStorage)return null;var b="AppHistory";return{push:function(b){var e=c();e=a.filter(e,function(a){return a!=b}),e.unshift(b),d(e)},get:function(){return c()},rm:function(b){var e=c();return e=a.filter(e,function(a){return a!=b}),d(e),!0}}}),KISSY.add("page/template/app-history-tpl",function(){return{html:'<h3>\u5386\u53f2\u8bb0\u5f55\uff1a</h3>\n{{#each his as item index}}\n<div class="his-item">\n    <a class="his-title" href="/app?root={{item}}">{{item}}	</a>\n    <a data-track="Delete History" class="his-delete" title="delete" data-index="{{index}}" href="#">&times;</a>\n</div>\n{{/each}}\n'}}),KISSY.add("utils/analytics",function(a,b){var c=b.all;return{init:function(){c("body").on("click",function(a){var b=c(a.target),d=b.attr("data-track");d&&analytics.track(d)})}}},{requires:["node"]}),KISSY.add("page/index",function(a,b,c,d,e,f){var g=b.all;d&&a.ready(function(){var b=d.get(),h=g("#app-history");b.length&&h.html(c(e.html).render({his:b})),g("body").delegate("click",".his-delete",function(b){b.preventDefault();var c=g(b.target).parent(".his-item"),e=a.trim(c.one(".his-title").text());d.rm(e)&&g(b.target).parent(".his-item").fadeOut(.2)}),f.init()})},{requires:["node","template","utils/app-history","./template/app-history-tpl","utils/analytics"]}); 